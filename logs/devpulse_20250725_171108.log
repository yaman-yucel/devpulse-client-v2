2025-07-25 17:11:08 | INFO     | devpulse_client.app.app:__init__:46 - Initialized DevPulse client for server: http://localhost:8000
2025-07-25 17:11:08 | INFO     | devpulse_client.app.app:start:73 - Validating credentials with server...
2025-07-25 17:11:08 | INFO     | devpulse_client.auth.collectors.device_collector:collect_fingerprint:20 - Collecting device fingerprint
2025-07-25 17:11:08 | INFO     | devpulse_client.auth.collectors.device_collector:collect_fingerprint:23 - Collecting device fingerprint: 18:60:24:92:da:75
2025-07-25 17:11:08 | INFO     | devpulse_client.auth.collectors.device_collector:collect_fingerprint:26 - Collecting device fingerprint: OKEY
2025-07-25 17:11:08 | DEBUG    | devpulse_client.auth.collectors.device_collector:collect_fingerprint:29 - Collected device fingerprint: MAC=18:60:24:92:da:75
2025-07-25 17:11:08 | INFO     | devpulse_client.auth.client.auth_client:_send_login_request:144 - Credential validation successful: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ5YW1hbiIsImRldmljZV9tYWMiOiIxODo2MDoyNDo5MjpkYTo3NSJ9.Tpu5dPrmlxNTPDWFGQzhKpsOGf-H2KHv7WlZTQ0a3KI', 'token_type': 'bearer', 'expires': False}
2025-07-25 17:11:08 | INFO     | devpulse_client.app.app:start:80 - ✅ Access token recieved.
2025-07-25 17:11:08 | INFO     | devpulse_client.ingest.client.event_client:run:33 - Starting activity tracker
2025-07-25 17:11:08 | INFO     | devpulse_client.ingest.client.event_client:run:43 - Logging activity: System Started
2025-07-25 17:11:08 | DEBUG    | devpulse_client.core.window_tracker.window_task:_start_tracking_new_window:68 - Started tracking window: 'event_store.py - devpulse-client-v2 - Visual Studio Code'
2025-07-25 17:11:09 | INFO     | devpulse_client.core.activity_state_tracker.activity_state_task:tick:74 - Logging activity: User Active
2025-07-25 17:11:18 | INFO     | devpulse_client.core.activity_state_tracker.activity_state_task:tick:101 - Logging activity: User Inactive
2025-07-25 17:11:19 | INFO     | devpulse_client.core.activity_state_tracker.activity_state_task:tick:106 - Logging activity: User Active
2025-07-25 17:11:20 | INFO     | devpulse_client.core.signal_handler.signal_handler:_handle_exit:54 - Received SIGINT – starting graceful shutdown…
2025-07-25 17:11:20 | ERROR    | devpulse_client.core.signal_handler.signal_handler:_handle_exit:67 - Cleanup function %s raised
Traceback (most recent call last):

  File "/home/faruk/python-projects/devpulse-client-v2/.venv/bin/devpulse-client", line 10, in <module>
    sys.exit(app())
    │   │    └ <typer.main.Typer object at 0x767b10c32510>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/home/faruk/python-projects/devpulse-client-v2/.venv/lib/python3.13/site-packages/typer/main.py", line 324, in __call__
    return get_command(self)(*args, **kwargs)
           │           │      │       └ {}
           │           │      └ ()
           │           └ <typer.main.Typer object at 0x767b10c32510>
           └ <function get_command at 0x767b11ab7a60>
  File "/home/faruk/python-projects/devpulse-client-v2/.venv/lib/python3.13/site-packages/click/core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           │    │     │       └ {}
           │    │     └ ()
           │    └ <function TyperGroup.main at 0x767b11ab5f80>
           └ <TyperGroup >
  File "/home/faruk/python-projects/devpulse-client-v2/.venv/lib/python3.13/site-packages/typer/core.py", line 757, in main
    return _main(
           └ <function _main at 0x767b11ab5080>
  File "/home/faruk/python-projects/devpulse-client-v2/.venv/lib/python3.13/site-packages/typer/core.py", line 195, in _main
    rv = self.invoke(ctx)
         │    │      └ <click.core.Context object at 0x767b10a582f0>
         │    └ <function Group.invoke at 0x767b1207d940>
         └ <TyperGroup >
  File "/home/faruk/python-projects/devpulse-client-v2/.venv/lib/python3.13/site-packages/click/core.py", line 1830, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
           │               │       │       │      └ <click.core.Context object at 0x767b10a54a50>
           │               │       │       └ <function Command.invoke at 0x767b1207c720>
           │               │       └ <TyperCommand run>
           │               └ <click.core.Context object at 0x767b10a54a50>
           └ <function Group.invoke.<locals>._process_result at 0x767b10a502c0>
  File "/home/faruk/python-projects/devpulse-client-v2/.venv/lib/python3.13/site-packages/click/core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           │   │      │    │           │   └ {'username': 'yaman', 'password': '12345', 'server': 'http://localhost:8000'}
           │   │      │    │           └ <click.core.Context object at 0x767b10a54a50>
           │   │      │    └ <function run at 0x767b10a50400>
           │   │      └ <TyperCommand run>
           │   └ <function Context.invoke at 0x767b1206f920>
           └ <click.core.Context object at 0x767b10a54a50>
  File "/home/faruk/python-projects/devpulse-client-v2/.venv/lib/python3.13/site-packages/click/core.py", line 794, in invoke
    return callback(*args, **kwargs)
           │         │       └ {'username': 'yaman', 'password': '12345', 'server': 'http://localhost:8000'}
           │         └ ()
           └ <function run at 0x767b10a50400>
  File "/home/faruk/python-projects/devpulse-client-v2/.venv/lib/python3.13/site-packages/typer/main.py", line 699, in wrapper
    return callback(**use_params)
           │          └ {'server': 'http://localhost:8000', 'username': 'yaman', 'password': '12345'}
           └ <function run at 0x767b10a50220>

  File "/home/faruk/python-projects/devpulse-client-v2/src/devpulse_client/cli/commands.py", line 47, in run
    if not client.start(username, password):
           │      │     │         └ '12345'
           │      │     └ 'yaman'
           │      └ <function DevPulseClient.start at 0x767b10a3bf60>
           └ <devpulse_client.app.app.DevPulseClient object at 0x767b10a596a0>

  File "/home/faruk/python-projects/devpulse-client-v2/src/devpulse_client/app/app.py", line 95, in start
    self.tracker.run()
    │    │       └ <function ActivityTracker.run at 0x767b10a3b420>
    │    └ <devpulse_client.ingest.client.event_client.ActivityTracker object at 0x767b10a5a270>
    └ <devpulse_client.app.app.DevPulseClient object at 0x767b10a596a0>

  File "/home/faruk/python-projects/devpulse-client-v2/src/devpulse_client/ingest/client/event_client.py", line 53, in run
    t.tick(now)
    │ │    └ 1753452680.0071542
    │ └ <function ActivityStateTask.tick at 0x767b10b7c4a0>
    └ ActivityStateTask(_locked=False, _idle=False, _idle_detector=<devpulse_client.core.activity_state_tracker.idle_detector.IdleD...

  File "/home/faruk/python-projects/devpulse-client-v2/src/devpulse_client/core/activity_state_tracker/activity_state_task.py", line 60, in tick
    locked = self._lock_detector.is_locked()
             │    │              └ <staticmethod(<function ScreenLockDetector.is_locked at 0x767b10b7c220>)>
             │    └ <devpulse_client.core.activity_state_tracker.screen_lock_detector.ScreenLockDetector object at 0x767b10c9a510>
             └ ActivityStateTask(_locked=False, _idle=False, _idle_detector=<devpulse_client.core.activity_state_tracker.idle_detector.IdleD...

  File "/home/faruk/python-projects/devpulse-client-v2/src/devpulse_client/core/activity_state_tracker/screen_lock_detector.py", line 85, in is_locked
    return ScreenLockDetector._is_locked_linux()
           │                  └ <staticmethod(<function ScreenLockDetector._is_locked_linux at 0x767b10b7c180>)>
           └ <class 'devpulse_client.core.activity_state_tracker.screen_lock_detector.ScreenLockDetector'>

  File "/home/faruk/python-projects/devpulse-client-v2/src/devpulse_client/core/activity_state_tracker/screen_lock_detector.py", line 58, in _is_locked_linux
    session_id = ScreenLockDetector._get_current_session_id()
                 │                  └ <staticmethod(<function ScreenLockDetector._get_current_session_id at 0x767b10b4ff60>)>
                 └ <class 'devpulse_client.core.activity_state_tracker.screen_lock_detector.ScreenLockDetector'>

  File "/home/faruk/python-projects/devpulse-client-v2/src/devpulse_client/core/activity_state_tracker/screen_lock_detector.py", line 18, in _get_current_session_id
    res = subprocess.run(["loginctl", "list-sessions", "--no-legend"], capture_output=True, check=False)
          │          └ <function run at 0x767b11f054e0>
          └ <module 'subprocess' from '/home/faruk/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/subprocess.py'>

  File "/home/faruk/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/subprocess.py", line 554, in run
    with Popen(*popenargs, **kwargs) as process:
         │      │            └ {'stdout': -1, 'stderr': -1}
         │      └ (['loginctl', 'list-sessions', '--no-legend'],)
         └ <class 'subprocess.Popen'>
  File "/home/faruk/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/subprocess.py", line 1039, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ None
    │    │              │     └ None
    │    │              └ ['loginctl', 'list-sessions', '--no-legend']
    │    └ <function Popen._execute_child at 0x767b11f06840>
    └ <Popen: returncode: None args: ['loginctl', 'list-sessions', '--no-legend']>
  File "/home/faruk/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/subprocess.py", line 1894, in _execute_child
    executable_list = tuple(
  File "/home/faruk/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/subprocess.py", line 1895, in <genexpr>
    os.path.join(os.fsencode(dir), executable)
    │  │    │    │  │        │     └ b'loginctl'
    │  │    │    │  │        └ '/sbin'
    │  │    │    │  └ <function _fscodec.<locals>.fsencode at 0x767b1238d080>
    │  │    │    └ <module 'os' (frozen)>
    │  │    └ <function join at 0x767b12383600>
    │  └ <module 'posixpath' (frozen)>
    └ <module 'os' (frozen)>
  File "<frozen posixpath>", line 72, in join

> File "/home/faruk/python-projects/devpulse-client-v2/src/devpulse_client/core/signal_handler/signal_handler.py", line 65, in _handle_exit
    fn()
    └ <function ActivityTracker._send_events at 0x767b10a3b9c0>

TypeError: ActivityTracker._send_events() missing 1 required positional argument: 'self'
2025-07-25 17:11:20 | INFO     | devpulse_client.ingest.client.event_client:run:63 - Logging activity: System Stopped
